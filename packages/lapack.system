;; -*- Mode: lisp -*-

(mk:define-language :f2cl
    :compiler #'f2cl:f2cl-compile
    :source-extension "f")

(mk:defsystem lapack
  :source-pathname (directory-namestring *load-truename*)
  :depends-on ("blas")
  :compiler-options (:keep-lisp-file t
		     :relaxed-array-decls t
		     :array-type :array
		     :array-slicing t
		     )
  :components
  (
   (:module lapack
	    :source-extension "f"
	    :language :f2cl
	    :components
	    (
	     (:file "dgeev"
		    :depends-on ("dgebak"
 				 "dgebal"
 				 "dgehrd"
 				 "dhseqr"
 				 "dlabad"
 				 "dlacpy"
 				 "dlamch"
 				 "dlange"
 				 "dlapy2"
 				 "dlartg"
 				 "dlascl"
 				 "dorghr"
 				 "dtrevc"
				 "ilaenv"
				 "dlabad"
				 ))
	     (:file "dgebak"
		    :depends-on ("ilaenv"
				 "dlamch"
				 "dlabad"
				 "dlange"
				 "dlascl"
				 "dgebal"
				 "dgehrd"
				 "dlacpy"
				 "dorghr"
				 "dhseqr"
				 "dtrevc"
				 "dlapy2"
				 "dlartg"
				 ))
 	     (:file "dgebal")
 	     (:file "dgehrd"
		    :depends-on ("dlahrd"
				 "dlarfb"
				 "dgehd2"
				 ))
 	     (:file "dhseqr"
		    :depends-on ("dlaset"
				 "dlahqr"
				 "dlanhs"
				 "dlapy2"
				 "dlarfg"
				 "dlarfx"
				 ))
 	     (:file "dlabad")
 	     (:file "dlacpy")
 	     (:file "dlamch")
 	     (:file "dlange"
		    :depends-on ("dlassq"
				 ))
 	     (:file "dlapy2")
 	     (:file "dlartg")
 	     (:file "dlascl")
 	     (:file "dorghr"
		    :depends-on ("dorgqr"
				 ))
	     (:file "dtrevc"
		    :depends-on ("dlabad"
				 "dlamch"
				 
				 "dlaln2"
				 ))
 	     (:file "ilaenv"
		    :depends-on ("ieeeck"))
	     (:file "dlahrd"
		    :depends-on ("dlarfg"))
	     (:file "dlarfb")
	     (:file "dgehd2"
		    :depends-on ("dlarfg"
				 "dlarf"
				 ))
	     (:file "dlaset")
	     (:file "dlahqr"
		    :depends-on ("dlanhs"
				 "dlarfg"
				 "dlanv2"))
	     (:file "dlanhs")
	     (:file "dlarfg"
		    :depends-on ("dlapy2"))
	     (:file "dlarfx")
	     (:file "dlassq")
	     (:file "dorgqr"
		    :depends-on ("dorg2r"
				 "dlarft"
				 ))
	     (:file "dlaln2"
		    :depends-on ("dladiv"
				 "dlamch"))
	     (:file "ieeeck")
	     (:file "dlarf")
	     (:file "dlanv2"
		    :depends-on ("dlapy2"))
	     (:file "dorg2r")
	     (:file "dlarft")
	     (:file "dladiv")
	     (:file "dgeevx"
		    :depends-on ("dtrsna"))
	     (:file "dtrsna"
		    :depends-on ("dtrexc" "dlacon" "dlaqtr"))
	     (:file "dtrexc"
		    :depends-on ("dlaexc"))
	     (:file "dlacon")
	     (:file "dlaqtr")
	     (:file "dlaexc"
		    :depends-on ("dlasy2"))
	     (:file "dlasy2")
	     
	     ;;(:file "zgeev")
	     ))))


(mk:defsystem "lapack-tests"
  :source-pathname (merge-pathnames #p"./lapack/" (directory-namestring *load-truename*))
  :depends-on ("lapack")
  :components
  ((:file "lapack-tests")))
